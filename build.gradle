plugins {
    id 'com.google.osdetector' version '1.7.3'
    id "org.openjfx.javafxplugin" apply false
}

subprojects {
    apply(plugin: "java")
    apply(plugin: "org.openjfx.javafxplugin")
    repositories {
        mavenCentral()
    }
    java {
        toolchain {
            languageVersion = JavaLanguageVersion.of(libs.versions.java.get())
        }
    }
    javafx {
        version = libs.versions.javafx.get()
    }
    tasks.withType(JavaCompile).configureEach {
        options.encoding = "UTF-8"
        configure(options) {
            options.compilerArgs << "-Xlint:deprecation" << "-Xlint:unchecked"
        }
    }
}

ext {
    osPkg = osdetector.os == "windows" ? "msi"
          : osdetector.os == "mac" ? "dmg"
          : osdetector.os == "linux" ? "deb"
          : ""
}

println "osdetector.os         = ${osdetector.os}"
println "osdetector.arch       = ${osdetector.arch}"
println "osdetector.classifier = ${osdetector.classifier}"